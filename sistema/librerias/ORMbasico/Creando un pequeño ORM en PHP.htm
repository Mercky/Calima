<!DOCTYPE html>
<!-- saved from url=(0066)http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/ -->
<html class="no-js cufon-active cufon-ready" lang="es-ES"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Creando un pequeño ORM en PHP</title>

<!-- Feeds and Pingback -->
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="alternate" type="application/rss+xml" title="Función 13 RSS2 Feed" href="http://www.funcion13.com/feed/">
<link rel="pingback" href="http://www.funcion13.com/xmlrpc.php">


<!-- This site is optimized with the Yoast WordPress SEO plugin v1.5.3.2 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="Descubre cómo crear un pequeño ORM usando PHP, que usaremos de base para conectar nuestras aplicaciones PHP con MySQL y convertirlos en objetos fácilmente.">
<link rel="canonical" href="./Creando un pequeño ORM en PHP_files/Creando un pequeño ORM en PHP.htm">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@Funcion13">
<meta name="twitter:domain" content="Función 13">
<meta name="twitter:creator" content="@Funcion13">
<meta name="twitter:image:src" content="http://www.funcion13.com/wp-content/uploads/2013/02/orm-banner.jpg">
<meta name="twitter:description" content="Descubre cómo crear un pequeño ORM usando PHP, que usaremos de base para conectar nuestras aplicaciones PHP con MySQL y convertirlos en objetos fácilmente.">
<meta name="twitter:title" content="Creando un pequeño ORM en PHP">
<meta name="twitter:url" content="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/">
<!-- / Yoast WordPress SEO plugin. -->

<script async="" src="./Creando un pequeño ORM en PHP_files/saved_resource"></script><script src="./Creando un pequeño ORM en PHP_files/cb=gapi.loaded_1" async=""></script><script type="text/javascript" async="" src="./Creando un pequeño ORM en PHP_files/ga.js"></script><script src="./Creando un pequeño ORM en PHP_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/cufon-yui.js"></script><style type="text/css">cufon{text-indent:0!important;}@media screen,projection{cufon{display:inline!important;display:inline-block!important;position:relative!important;vertical-align:middle!important;font-size:1px!important;line-height:1px!important;}cufon cufontext{display:-moz-inline-box!important;display:inline-block!important;width:0!important;height:0!important;overflow:hidden!important;text-indent:-10000in!important;}cufon canvas{position:relative!important;}}@media print{cufon{padding:0!important;}cufon canvas{display:none!important;}}</style>
<script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/0"></script>
<link rel="alternate" type="application/rss+xml" title="Función 13 » Feed" href="http://www.funcion13.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Función 13 » RSS de los comentarios" href="http://www.funcion13.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Función 13 » Creando un pequeño ORM en PHP RSS de los comentarios" href="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/feed/">
<link rel="stylesheet" id="striking-styles-screen-css" href="./Creando un pequeño ORM en PHP_files/7f4e28a04ca2a5e5fb6b2e92a2a3f4ac.css" type="text/css" media="screen">
<link rel="stylesheet" id="striking-styles-all-css" href="./Creando un pequeño ORM en PHP_files/2df1cbaca1809bd19db5d8ecf44b20f4.css" type="text/css" media="all">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.funcion13.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.funcion13.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 3.8.3">
<link rel="shortlink" href="http://www.funcion13.com/?p=2573">
<script type="text/javascript">

Cufon.replace("#site_name,#site_description,.kwick_title,.kwick_detail h3,#footer h3,#copyright,.dropcap1,.dropcap2,.dropcap3,.dropcap4", {fontFamily : "Segan"}); 
Cufon.replace(".portfolio_title,h1,h2,h3,h4,h5,h6,#feature h1,#introduce",{fontFamily : "Segan"});
Cufon.replace('#navigation a', {
	hover: true,
	fontFamily : "Segan"
});

</script><script type="text/javascript">
var image_url='http://www.funcion13.com/wp-content/themes/striking/images';
</script>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<link rel="stylesheet" type="text/css" href="./Creando un pequeño ORM en PHP_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Creando un pequeño ORM en PHP_files/shThemeEclipse.css"><style type="text/css" id="syntaxhighlighteranchor"></style>

<!--[if IE 6 ]>
	<link href="http://www.funcion13.com/wp-content/themes/striking/css/ie6.css" media="screen" rel="stylesheet" type="text/css">
	<script type="text/javascript" src="http://www.funcion13.com/wp-content/themes/striking/js/dd_belatedpng-min.js"></script>
	<script type="text/javascript" src="http://www.funcion13.com/wp-content/themes/striking/js/ie6.js"></script>
<![endif]-->
<!--[if IE 7 ]>
<link href="http://www.funcion13.com/wp-content/themes/striking/css/ie7.css" media="screen" rel="stylesheet" type="text/css">
<![endif]-->
<!--[if IE 8 ]>
<link href="http://www.funcion13.com/wp-content/themes/striking/css/ie8.css" media="screen" rel="stylesheet" type="text/css">
<![endif]-->
<!--[if IE]>
	<script type="text/javascript" src="http://www.funcion13.com/wp-content/themes/striking/js/html5shiv.js"></script>
<![endif]-->
<script type="text/javascript" async="" src="./Creando un pequeño ORM en PHP_files/embed.js"></script><script async="" type="text/javascript" src="./Creando un pequeño ORM en PHP_files/count.js"></script><script async="" src="./Creando un pequeño ORM en PHP_files/count-data.js"></script><script src="./Creando un pequeño ORM en PHP_files/alfie.f51946af45e0b561c60f768335c9eb79.js" async="" charset="UTF-8"></script></head>
<body class="single single-post postid-2573 single-format-standard scroll-to-top" data-twttr-rendered="true">
<header id="header">
	<div class="inner">
		<div id="logo_text">
			<a id="site_name" href="http://www.funcion13.com/">Función 13</a>
		</div>
		<nav id="navigation" class="jqueryslidemenu"><ul id="menu-menu-principal" class="menu"><li id="menu-item-6" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6"><a href="http://www.funcion13.com/">Inicio</a></li>
<li id="menu-item-1686" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1686"><a href="http://www.funcion13.com/portafolio/">Portafolio</a></li>
<li id="menu-item-1668" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1668 has-children"><a href="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/#">Aplicaciones</a>
<ul class="sub-menu">
	<li id="menu-item-1669" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1669"><a href="http://bikebus.funcion13.com/">BuSeVici</a></li>
</ul>
</li>
<li id="menu-item-2581" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2581 has-children"><a href="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/#">Libros</a>
<ul class="sub-menu">
	<li id="menu-item-2739" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2739"><a href="https://leanpub.com/codebright-es">Laravel: CodeBright</a></li>
	<li id="menu-item-2704" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2704"><a href="https://leanpub.com/descubriendo-nodejs-express">Descubriendo Node.js y Express</a></li>
	<li id="menu-item-2582" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2582"><a href="https://leanpub.com/codehappy-es">Laravel: CodeHappy</a></li>
	<li id="menu-item-2583" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2583"><a href="http://store.elated.com/">Domine las aplicaciones web móviles con jQuery Mobile</a></li>
</ul>
</li>
<li id="menu-item-1461" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1461 current_page_parent"><a href="http://www.funcion13.com/">Blog</a></li>
<li id="menu-item-1634" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1634"><a href="http://www.funcion13.com/contacto/">Contacto</a></li>
</ul></nav>	</div>
</header><div id="feature"><div class="top_shadow"></div><div class="inner"><h1>Creando un pequeño ORM en PHP</h1><div id="introduce"><div class="entry_meta"><time datetime="2013-02-27"><a href="http://www.funcion13.com/2013/02/">27 febrero, 2013</a></time><span class="separater">|</span><span class="categories">Publicado el: <a href="http://www.funcion13.com/category/programacion/php-programacion/" title="Ver todas las entradas en PHP" rel="category tag">PHP</a>, <a href="http://www.funcion13.com/category/programacion/" title="Ver todas las entradas en Programación" rel="category tag">Programación</a></span><span class="comments"><a href="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/#disqus_thread" title="Comentarios en Creando un pequeño ORM en PHP" data-disqus-identifier="2573 http://www.funcion13.com/?p=2573">20 comentarios</a></span></div></div></div><div class="bottom_shadow"></div></div><div id="page">
	<div class="inner right_sidebar">
		<div id="main">
					<article id="post-2573" class="post-2573 post type-post status-publish format-standard hentry category-php-programacion category-programacion entry content entry_full">
	<header>
	</header>
	<p><a id="dd_start"></a>
</p><p>La mayoría de las veces que empezamos un pequeño desarrollo, la cosa suele crecer e ir a más y pronto estaremos lidiando con un montón de código que no teníamos idea que iba a existir.</p>
<p>Los frameworks (como <a href="http://laravel.com/">Laravel</a> o <a href="http://ellislab.com/codeigniter">CodeIgniter</a>) ayudan a organizar el código desde el principio y tienden a evitar este problema ya que están basados en buenas prácticas para evitar cometer errores que otros programadores ya han cometido. No obstante, no en todas las situaciones es aplicable un framework y en muchas ocasiones, querremos hacer algo pequeño para lo que, el engorro de usar un framework, no estará <em>del todo</em> justificado.<br>
Y señalo,&nbsp;<strong><em>del todo</em></strong><em>,</em> porque en mi experiencia, las aplicaciones tienden a crecer más rápido de lo que siempre imaginamos.</p>
<p>En mi trabajo, comencé una aplicación como una webapp para extraer datos de una tabla y ha acabado en algo con más de 30 tablas y un porrón de vistas en menos de 1 año.</p>
<p><a href="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/boy-that-escalated-quickly/" rel="attachment wp-att-2574"><img class="aligncenter size-full wp-image-2574" alt="boy-that-escalated-quickly" src="./Creando un pequeño ORM en PHP_files/boy-that-escalated-quickly.jpg" width="550" height="280"></a></p>
<p>He reescrito el código de la aplicación en varias ocasiones, al completo, y ahora me estoy planteando el migrarlo a Laravel.</p>
<p>En ese proyecto, lo primero que necesité fue una capa de acceso a la base de datos, algo que automatizara las tareas y algo que fuera extensible a varios protocolos, ya que tengo que tratar con datos de varios tipos de bases de datos.</p>
<p>Para esto hay librerías como Doctrine o Eloquent que añaden bastante funcionalidad pero aquí pretendemos hacer algo sencillo.</p>
<p>El contenido de este artículo, pretende sentar las bases para el código que usaré en otros artículos, como la serie de <a title="Localizador de tiendas con PHP, jQuery Mobile y MySQL – Parte 1" href="http://www.funcion13.com/2013/01/11/localizador-tiendas-php-jquery-mobile-mysql-parte-1/">Localizador de tiendas con PHP, jQuery Mobile y MySQL</a>.</p>
<h3>¿Qué demonios es un ORM?</h3>
<p>ORM son las siglas de&nbsp;<em>Object-relational mapping</em>, que en la lengua de Cervantes viene a ser algo como&nbsp;<em>mapeo de objetos relacional</em>.</p>
<h4>¿Vale, pero qué significa?</h4>
<p>El ORM es una técnica de programación que nos permite valernos de la orientación a objetos de un lenguaje, para representar las relaciones entre tablas de una base de datos.</p>
<p>En la práctica, si tenemos una tabla usuarios que contenga… usuarios, tendremos una clase Usuarios en nuestra aplicación que contendrá&nbsp;<strong>el esqueleto</strong> de la tabla. Si nos ajustamos al Modelo/Vista/Controlador, esa clase no debe contener lógica.</p>
<p>Una tabla así:</p>
<div><div id="highlighter_523023" class="syntaxhighlighter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">IF </code><code class="sql color1">NOT</code> <code class="sql plain">EXISTS `users` (</code></div><div class="line number2 index1 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`id` </code><code class="sql keyword">int</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number3 index2 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`username` </code><code class="sql keyword">varchar</code><code class="sql plain">(8) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql keyword">DEFAULT</code> <code class="sql string">'00000000'</code><code class="sql plain">,</code></div><div class="line number4 index3 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`</code><code class="sql keyword">password</code><code class="sql plain">` </code><code class="sql keyword">varchar</code><code class="sql plain">(50) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number5 index4 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`</code><code class="sql keyword">name</code><code class="sql plain">` </code><code class="sql keyword">varchar</code><code class="sql plain">(50) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number6 index5 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`surname` </code><code class="sql keyword">varchar</code><code class="sql plain">(50) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number7 index6 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql plain">`email` </code><code class="sql keyword">varchar</code><code class="sql plain">(100) </code><code class="sql keyword">DEFAULT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number8 index7 alt1"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(`id`),</code></div><div class="line number9 index8 alt2"><code class="sql spaces">&nbsp;&nbsp;</code><code class="sql keyword">KEY</code> <code class="sql plain">`username` (`username`),</code></div><div class="line number10 index9 alt1"><code class="sql plain">) ENGINE=InnoDB&nbsp; </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=utf8;</code></div></div></td></tr></tbody></table></div></div>
<p>Nos llevaría a una clase así:</p>
<div><div id="highlighter_91259" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">class</code> <code class="php plain">User {</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$id</code><code class="php plain">;</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$username</code><code class="php plain">;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$password</code><code class="php plain">;</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$name</code><code class="php plain">;</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$surname</code><code class="php plain">;</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$email</code><code class="php plain">;</code></div><div class="line number8 index7 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<h4>¿Y qué ventajas tiene?</h4>
<p>Es probable que te cueste verlas, especialmente si estás empezando pero esto te permite abstraerte de mucho código. Es algo que desarrollas una vez y que, raramente tendrás que volver a tocar, salvo para hacer algunos ajustes y/o ampliarlo.</p>
<p>Por ejemplo, al final del artículo (si me he explicado bien) serás capaz de crear cualquier clase y hacer algo así:</p>
<div><div id="highlighter_512475" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">//Obteniendo usuario con id = 1</code></div><div class="line number2 index1 alt1"><code class="php variable">$user</code> <code class="php plain">= User::get(1);</code></div><div class="line number3 index2 alt2"><code class="php functions">echo</code> <code class="php variable">$user</code><code class="php plain">-&gt;name; </code><code class="php comments">// Antonio</code></div></div></td></tr></tbody></table></div></div>
<p>¡Sin escribir ni una sola línea de SQL!</p>
<h3>Unas cuantas aclaraciones</h3>
<p>Antes de continuar, me gustaría hacer algunas aclaraciones para evitar confusiones.</p>
<p>El código de este artículo está en Inglés. No es por fastidiar, y me gusta ofrecer el código en castellano. Pero este código lo vengo arrastrando y mejorando desde hace mucho tiempo y se me antoja difícil “traducirlo” sin cometer errores.</p>
<p>En este artículo intento transmitir la forma en la que yo hago las cosas después de varias iteraciones e intentando ajustarme a las buenas prácticas que conozco, pero no por ello es la mejor forma de hacer las cosas. Con esto quiero decir, que este código se ajusta a mis necesidades y creo que se puede ajustar a las de más gente pero no por ello es la mejor idea y estoy seguro de que podría ser mejorado de múltiples formas, pero no he encontrado la forma, el momento, o la necesidad de hacerlo hasta ahora.</p>
<div class="info">
<div class="message_box_content">Si la programación orientada a objetos es aun un misterio, un galimatías que no puedes descifrar y no sabes lo que significan palabras como static o public, no dejes de echar un vistazo al artículo sobre la <a href="http://www.funcion13.com/2013/04/09/orientacion-a-objetos-en-php-para-principiantes/" title="Orientación a objetos en PHP para principiantes">programación orientada a objetos en PHP para principiantes</a>.</div>
<div class="clearboth"></div>
</div>
<h2>El conector de la Base de Datos</h2>
<p>Lo primero que necesitamos en nuestro ORM es un gestor de la base de datos que se encargue de hacer muchas de las tareas repetitivas que acostumbramos a hacer con cada consulta.</p>
<p>Este gestor tendrá un esqueleto “base” y un adaptador para MySQL, que es el motor más común para usar con PHP. Como comentaba, de manera interna, he creado conectores para Oracle y MS SQL, pero queda fuera del alcance de este artículo.</p>
<p>Este esqueleto es una versión “mejorada” de la que <a href="http://web.ontuts.com/tutoriales/creando-una-capa-de-conexion-abstracta-a-base-de-datos-con-php/">publicó Iván Guardado en ontuts</a> hace ya… 4 años.</p>
<h3>El esqueleto del proveedor</h3>
<p>Para que podamos abstraernos del motor de base de datos que vayamos a utilizar, necesitamos crear una clase que nos sirva de base para cada proveedor. De esta forma, si vamos a ejecutar una consulta, no nos tenemos que preocupar de llamar a <code>mysqli_query</code> o a <code>mssql_query</code>, llamamos a un método <code>query</code> que se encargue de ponerle luego el nombre que le corresponda.</p>
<p>Para ellos usaremos una clase <code>abstract</code>, que no implica tipo de lógica alguna, solo propiedades, métodos y parámetros que reciben éstos.</p>
<div><div id="highlighter_324535" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">abstract</code> <code class="php keyword">class</code> <code class="php plain">DatabaseProvider</code></div><div class="line number2 index1 alt1"><code class="php plain">{</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">protected</code> <code class="php variable">$resource</code><code class="php plain">;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">connect(</code><code class="php variable">$host</code><code class="php plain">, </code><code class="php variable">$user</code><code class="php plain">, </code><code class="php variable">$pass</code><code class="php plain">, </code><code class="php variable">$dbname</code><code class="php plain">);</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">disconnect ();</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">getErrorNo();</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">getError();</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">query(</code><code class="php variable">$q</code><code class="php plain">);</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">numRows(</code><code class="php variable">$resource</code><code class="php plain">);</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">fetchArray(</code><code class="php variable">$resource</code><code class="php plain">);</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">isConnected();</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">escape(</code><code class="php variable">$var</code><code class="php plain">);</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">getInsertedID();</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">changeDB(</code><code class="php variable">$database</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">abstract</code> <code class="php keyword">function</code> <code class="php plain">setCharset(</code><code class="php variable">$charset</code><code class="php plain">);</code></div><div class="line number16 index15 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>En <code>$resource</code> es donde guardaremos el recurso de la conexión que nos permite interactuar con los métodos del motor de la base de datos. El resto de métodos los veremos enseguida, cuando los implementemos en el motor MySQL.</p>
<h3>El proveedor MySQL</h3>
<div><div id="highlighter_168584" class="syntaxhighlighter  php "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">require_once</code><code class="php plain">(</code><code class="php string">'DatabaseProvider.php'</code><code class="php plain">);</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">class</code> <code class="php plain">MySqlProvider </code><code class="php keyword">extends</code> <code class="php plain">DatabaseProvider</code></div><div class="line number4 index3 alt1"><code class="php plain">{</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">connect(</code><code class="php variable">$host</code><code class="php plain">, </code><code class="php variable">$user</code><code class="php plain">, </code><code class="php variable">$pass</code><code class="php plain">, </code><code class="php variable">$dbname</code><code class="php plain">){</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;resource = </code><code class="php keyword">new</code> <code class="php plain">mysqli(</code><code class="php variable">$host</code><code class="php plain">, </code><code class="php variable">$user</code><code class="php plain">, </code><code class="php variable">$pass</code><code class="php plain">, </code><code class="php variable">$dbname</code><code class="php plain">);</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;connect_errno){ </code><code class="php comments">// Connection fails</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">error_log</code><code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;connect_error);</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource;</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">disconnect(){</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;close();</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getErrorNo(){</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;errno;</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getError(){</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;error;</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">query(</code><code class="php variable">$q</code><code class="php plain">){</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;query(</code><code class="php variable">$q</code><code class="php plain">);</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">numRows(</code><code class="php variable">$resource</code><code class="php plain">){</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$num_rows</code> <code class="php plain">= 0;</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$resource</code><code class="php plain">){</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$num_rows</code> <code class="php plain">= </code><code class="php variable">$resource</code><code class="php plain">-&gt;num_rows;</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$num_rows</code><code class="php plain">;</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">fetchArray(</code><code class="php variable">$result</code><code class="php plain">){</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$result</code><code class="php plain">-&gt;fetch_assoc();</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">isConnected(){</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">!</code><code class="php functions">is_null</code><code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;resource);</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">escape(</code><code class="php variable">$var</code><code class="php plain">){</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;real_escape_string(</code><code class="php variable">$var</code><code class="php plain">);</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getInsertedID(){</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;insert_id;</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">changeDB (</code><code class="php variable">$database</code><code class="php plain">){</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;select_db(</code><code class="php variable">$database</code><code class="php plain">);</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">setCharset(</code><code class="php variable">$charset</code><code class="php plain">) {</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;resource-&gt;set_charset(</code><code class="php variable">$charset</code><code class="php plain">);</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number53 index52 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Como veis, la clase <code>MySQLProvider</code> extiende a la clase <code>DatabaseProvider</code> que acabamos de crear. En este caso estamos usando los métodos orientados a objetos de MySQL aunque sería equivalente el uso de funciones normales.</p>
<p>Veamos la lista</p>
<ul>
<li><code>connect</code> : Esta es la función que se conecta a la base de datos, en caso de existir un error en la conexión, lo almacena en el log de errores de PHP.</li>
<li><code>disconnect</code> : Esta función se desconecta de la base de datos.&nbsp;<em><br>
</em></li>
<li><code>getErrorNo</code> : Esta función nos devuelve el número de error (en caso de haberlo) al haberse ejecutado una consulta o procedimiento.</li>
<li><code>getError</code> : Esta función nos devuelve el mensaje de error (sin el número).</li>
<li><code>query</code> : Esta función se encarga de realizar una consulta a la base de datos.</li>
<li><code>numRows</code> : Esta función nos devuelve el número de filas seleccionadas, actualizadas, insertadas o eliminadas.</li>
</ul>
<p>Ahora que ya tenemos todo listo, podemos pasar a la última clase, la que se encarga de realizar todas las acciones, con la que realmente interactuaremos directamente.</p>
<h3>La capa de comunicación</h3>
<div><div id="highlighter_536412" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="php keyword">class</code> <code class="php plain">Database</code></div><div class="line number4 index3 alt1"><code class="php plain">{</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php variable">$provider</code><code class="php plain">;</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php variable">$params</code><code class="php plain">;</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">static</code> <code class="php variable">$_con</code><code class="php plain">;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">__construct(</code><code class="php variable">$provider</code><code class="php plain">,</code><code class="php variable">$host</code><code class="php plain">,</code><code class="php variable">$user</code><code class="php plain">,</code><code class="php variable">$pass</code><code class="php plain">,</code><code class="php variable">$db</code><code class="php plain">){</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(!</code><code class="php functions">class_exists</code><code class="php plain">(</code><code class="php variable">$provider</code><code class="php plain">)){</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php keyword">new</code> <code class="php plain">Exception(</code><code class="php string">"The provider doesn't exists or it wasn't implemented"</code><code class="php plain">);</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;provider = </code><code class="php keyword">new</code> <code class="php variable">$provider</code><code class="php plain">;</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;connect(</code><code class="php variable">$host</code><code class="php plain">, </code><code class="php variable">$user</code><code class="php plain">, </code><code class="php variable">$pass</code><code class="php plain">, </code><code class="php variable">$db</code><code class="php plain">);</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(!</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;isConnected()){</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php keyword">new</code> <code class="php plain">Exception(</code><code class="php string">"We couldn't connect to the database &gt;&gt; $db"</code><code class="php plain">);</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;setCharset(</code><code class="php string">'utf-8'</code><code class="php plain">);</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">static</code> <code class="php keyword">function</code> <code class="php plain">getConnection(</code><code class="php variable">$provider</code><code class="php plain">,</code><code class="php variable">$host</code><code class="php plain">,</code><code class="php variable">$user</code><code class="php plain">,</code><code class="php variable">$pass</code><code class="php plain">,</code><code class="php variable">$db</code><code class="php plain">){</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(self::</code><code class="php variable">$_con</code><code class="php plain">){</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">self::</code><code class="php variable">$_con</code><code class="php plain">;</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code><code class="php plain">{</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$class</code> <code class="php plain">= </code><code class="php constants">__CLASS__</code><code class="php plain">;</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">self::</code><code class="php variable">$_con</code> <code class="php plain">= </code><code class="php keyword">new</code> <code class="php variable">$class</code><code class="php plain">(</code><code class="php variable">$provider</code><code class="php plain">,</code><code class="php variable">$host</code><code class="php plain">,</code><code class="php variable">$user</code><code class="php plain">,</code><code class="php variable">$pass</code><code class="php plain">,</code><code class="php variable">$db</code><code class="php plain">);</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">self::</code><code class="php variable">$_con</code><code class="php plain">;</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">function</code> <code class="php plain">replaceParams(){</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$b</code><code class="php plain">=current(</code><code class="php variable">$this</code><code class="php plain">-&gt;params);</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">next(</code><code class="php variable">$this</code><code class="php plain">-&gt;params);</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$b</code><code class="php plain">;</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">function</code> <code class="php plain">prepare(</code><code class="php variable">$sql</code><code class="php plain">, </code><code class="php variable">$params</code><code class="php plain">){</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$escaped</code> <code class="php plain">= </code><code class="php string">''</code><code class="php plain">;</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$params</code><code class="php plain">){</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$params</code> <code class="php keyword">as</code> <code class="php variable">$key</code> <code class="php plain">=&gt; </code><code class="php variable">$value</code><code class="php plain">){</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(</code><code class="php functions">is_bool</code><code class="php plain">(</code><code class="php variable">$value</code><code class="php plain">)){ </code><code class="php variable">$value</code> <code class="php plain">= </code><code class="php variable">$value</code> <code class="php plain">? 1:0; }</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">elseif</code><code class="php plain">(</code><code class="php functions">is_double</code><code class="php plain">(</code><code class="php variable">$value</code><code class="php plain">)){</code><code class="php variable">$value</code> <code class="php plain">= </code><code class="php functions">str_replace</code><code class="php plain">(</code><code class="php string">','</code><code class="php plain">, </code><code class="php string">'.'</code><code class="php plain">, </code><code class="php variable">$value</code><code class="php plain">);}</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">elseif</code><code class="php plain">(</code><code class="php functions">is_numeric</code><code class="php plain">(</code><code class="php variable">$value</code><code class="php plain">)){</code></div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php functions">is_string</code><code class="php plain">(</code><code class="php variable">$value</code><code class="php plain">)){</code><code class="php variable">$value</code> <code class="php plain">= </code><code class="php string">"'"</code><code class="php plain">.</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;escape(</code><code class="php variable">$value</code><code class="php plain">).</code><code class="php string">"'"</code><code class="php plain">;}</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code> <code class="php plain">{</code><code class="php variable">$value</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;escape(</code><code class="php variable">$value</code><code class="php plain">);}</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">elseif</code><code class="php plain">(</code><code class="php functions">is_null</code><code class="php plain">(</code><code class="php variable">$value</code><code class="php plain">)){</code><code class="php variable">$value</code> <code class="php plain">= </code><code class="php string">"NULL"</code><code class="php plain">;}</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code><code class="php plain">{</code><code class="php variable">$value</code> <code class="php plain">= </code><code class="php string">"'"</code><code class="php plain">.</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;escape(</code><code class="php variable">$value</code><code class="php plain">).</code><code class="php string">"'"</code><code class="php plain">;}</code></div><div class="line number52 index51 alt1">&nbsp;</div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$escaped</code><code class="php plain">[] = </code><code class="php variable">$value</code><code class="php plain">;</code></div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;params = </code><code class="php variable">$escaped</code><code class="php plain">;</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$q</code> <code class="php plain">= preg_replace_callback(</code><code class="php string">"/(\?)/i"</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">,</code><code class="php string">"replaceParams"</code><code class="php plain">), </code><code class="php variable">$sql</code><code class="php plain">);</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$q</code><code class="php plain">;</code></div><div class="line number60 index59 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number61 index60 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">function</code> <code class="php plain">sendQuery(</code><code class="php variable">$q</code><code class="php plain">, </code><code class="php variable">$params</code><code class="php plain">){</code></div><div class="line number62 index61 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;prepare(</code><code class="php variable">$q</code><code class="php plain">, </code><code class="php variable">$params</code><code class="php plain">);</code></div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;query(</code><code class="php variable">$query</code><code class="php plain">);</code></div><div class="line number64 index63 alt1">&nbsp;</div><div class="line number65 index64 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;getErrorNo()){</code></div><div class="line number66 index65 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">error_log</code><code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;getError());</code></div><div class="line number67 index66 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number68 index67 alt1">&nbsp;</div><div class="line number69 index68 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number70 index69 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number71 index70 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">executeScalar(</code><code class="php variable">$q</code><code class="php plain">, </code><code class="php variable">$params</code><code class="php plain">=null){</code></div><div class="line number72 index71 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;sendQuery(</code><code class="php variable">$q</code><code class="php plain">, </code><code class="php variable">$params</code><code class="php plain">);</code></div><div class="line number73 index72 alt2">&nbsp;</div><div class="line number74 index73 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(!</code><code class="php functions">is_null</code><code class="php plain">(</code><code class="php variable">$result</code><code class="php plain">)){</code></div><div class="line number75 index74 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">(!</code><code class="php functions">is_object</code><code class="php plain">(</code><code class="php variable">$result</code><code class="php plain">)){</code></div><div class="line number76 index75 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number77 index76 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number78 index77 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code><code class="php plain">{</code></div><div class="line number79 index78 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$row</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;fetchArray(</code><code class="php variable">$result</code><code class="php plain">);</code></div><div class="line number80 index79 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$row</code><code class="php plain">[0];</code></div><div class="line number81 index80 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number82 index81 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number83 index82 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">null;</code></div><div class="line number84 index83 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number85 index84 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">execute(</code><code class="php variable">$q</code><code class="php plain">, </code><code class="php variable">$array_index</code> <code class="php plain">= null, </code><code class="php variable">$params</code><code class="php plain">=null){</code></div><div class="line number86 index85 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;sendQuery(</code><code class="php variable">$q</code><code class="php plain">, </code><code class="php variable">$params</code><code class="php plain">);</code></div><div class="line number87 index86 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code><code class="php plain">((</code><code class="php functions">is_object</code><code class="php plain">(</code><code class="php variable">$result</code><code class="php plain">) || </code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;numRows(</code><code class="php variable">$result</code><code class="php plain">) || </code><code class="php variable">$result</code><code class="php plain">) &amp;&amp;</code></div><div class="line number88 index87 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">(</code><code class="php variable">$result</code> <code class="php plain">!== true &amp;&amp; </code><code class="php variable">$result</code> <code class="php plain">!== false)) {</code></div><div class="line number89 index88 alt2">&nbsp;</div><div class="line number90 index89 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$arr</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number91 index90 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">while</code><code class="php plain">(</code><code class="php variable">$row</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;fetchArray(</code><code class="php variable">$result</code><code class="php plain">)){</code></div><div class="line number92 index91 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$array_index</code><code class="php plain">){ </code><code class="php variable">$arr</code><code class="php plain">[</code><code class="php variable">$row</code><code class="php plain">[</code><code class="php variable">$array_index</code><code class="php plain">]] = </code><code class="php variable">$row</code><code class="php plain">; }</code></div><div class="line number93 index92 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code> <code class="php plain">{ </code><code class="php variable">$arr</code><code class="php plain">[] = </code><code class="php variable">$row</code><code class="php plain">;}</code></div><div class="line number94 index93 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number95 index94 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$arr</code><code class="php plain">;</code></div><div class="line number96 index95 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number97 index96 alt2">&nbsp;</div><div class="line number98 index97 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;getErrorNo() ? false : true;</code></div><div class="line number99 index98 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number100 index99 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">changeDB (</code><code class="php variable">$database</code><code class="php plain">){</code></div><div class="line number101 index100 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;changeDB(</code><code class="php variable">$database</code><code class="php plain">);</code></div><div class="line number102 index101 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number103 index102 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getInsertedID(){</code></div><div class="line number104 index103 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;getInsertedID();</code></div><div class="line number105 index104 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number106 index105 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getError(){</code></div><div class="line number107 index106 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;getError();</code></div><div class="line number108 index107 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number109 index108 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">__destruct(){</code></div><div class="line number110 index109 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;provider-&gt;disconnect();</code></div><div class="line number111 index110 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number112 index111 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Vamos paso a paso.</p>
<p>El constructor intenta saber si el proveedor que le estamos pasando, existe. En caso de que no sea así, lanzaremos una excepción, que podrá ser controlada posteriormente. Si todo va bien, crearemos un nuevo proveedor e intentaremos conectarnos a la base de datos. En caso de no poder, tendremos otra excepción.</p>
<p>En mi caso, y especialmente con MySQL, cambio la codificación a UTF-8 para que todos los nombres y apellidos que vayan con tildes, sean bien tratados por el código, esto no es necesario.</p>
<p>La función <code>getConnection</code> es la encargada de obtener la conexión con la base de datos, siguiendo el patrón Singleton, en caso de que ya haya una conexión establecida, la devuelve, para ahorrar recursos, y en caso de que no, crea una nueva conexión.</p>
<p><code>replaceParams</code> es llamada por la función que prepara la consulta y se encarga de devolver el parámetro que pasemos en cada interrogante, valiéndose de la función <code>next()</code> que va moviendo el cursor de la matriz por cada coincidencia. &nbsp;Esto nos convierte una consulta de este tipo:</p>
<div><div id="highlighter_820718" class="syntaxhighlighter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">SELECT</code> <code class="sql plain">* </code><code class="sql keyword">FROM</code> <code class="sql plain">usuarios </code><code class="sql keyword">WHERE</code> <code class="sql plain">nombre = ?</code></div></div></td></tr></tbody></table></div></div>
<p>Con esta matriz</p>
<div><div id="highlighter_969296" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">array</code> <code class="php plain">(</code><code class="php string">'Eutanasio'</code><code class="php plain">);</code></div></div></td></tr></tbody></table></div></div>
<p>En esto:</p>
<div><div id="highlighter_956414" class="syntaxhighlighter  sql"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">SELECT</code> <code class="sql plain">* </code><code class="sql keyword">FROM</code> <code class="sql plain">usuarios </code><code class="sql keyword">WHERE</code> <code class="sql plain">nombre = </code><code class="sql string">'Eutanasio'</code></div></div></td></tr></tbody></table></div></div>
<p>La función prepare es quizá la más importante ya que se encarga de limpiar los parámetros y de colocarlos en su lugar, es la función que hace uso de replaceParams, la cual ya hemos definido, con el uso de preg_replace_callback(). Esta función escapa todos los parámetros para evitar los ataques de inyección SQL, añade las comillas a las cadenas, etc.</p>
<p>sendQuery es el método encargado de ejecutar las consultas y comprobar los errores que se pudieran cometer, en mi caso, los envío al log de errores de PHP, se pueden lanzar excepciones o realizar cualquier otra acción. &nbsp;Esta función es usada por los dos métodos que veremos a continuación.</p>
<p>execute y executeScalar son los dos métodos que se encargan de procesar los datos obtenidos de las consultas y son los únicos que son públicos. Los métodos solo se diferencian en que execute, se encarga de cargar los datos en una matriz, mientras que el segundo devuelve solo la primera columna de la primera fila.</p>
<h3>¡Todo a punto!</h3>
<p>Ahora que ya lo tenemos todo a punto, ya tenemos todas las herramientas para comenzar a crear nuestro ORM. No obstante, vamos a ver cómo usarlo.</p>
<div><div id="highlighter_670505" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php variable">$db</code> <code class="php plain">= DatabaseLayer:getConnection(</code><code class="php string">"MySqlProvider"</code><code class="php plain">);</code></div><div class="line number2 index1 alt1"><code class="php variable">$resultados</code> <code class="php plain">= </code><code class="php variable">$db</code><code class="php plain">-&gt;execute(</code><code class="php string">'SELECT * FROM users WHERE name LIKE ?'</code><code class="php plain">, null, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'Antonio'</code><code class="php plain">));</code></div><div class="line number3 index2 alt2"><code class="php comments">// Tendríamos una matriz con todos los datos de los usuarios cuyo nombre fuera como Antonio</code></div><div class="line number4 index3 alt1"><code class="php variable">$resultado</code> <code class="php plain">=&nbsp;</code><code class="php variable">$db</code><code class="php plain">-&gt;executeScalar(</code><code class="php string">'SELECT COUNT(id) FROM users WHERE name LIKE ?'</code><code class="php plain">, null, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'Antonio'</code><code class="php plain">));</code></div><div class="line number5 index4 alt2"><code class="php comments">// Tenemos un valor numérico en el que sabemos el número de usuarios que se llaman Antonio</code></div></div></td></tr></tbody></table></div></div>
<h2>Creando las clases del ORM</h2>
<p>Ahora que ya tenemos nuestro conector con la base de datos, vamos a crear la clase ORM, que extenderán el resto de clases. El ORM se apoyará totalmente en la clase que acabamos de crear. </p>
<p>Veamos el código</p>
<div><div id="highlighter_344391" class="syntaxhighlighter  php "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php keyword">class</code> <code class="php plain">ORM</code></div><div class="line number3 index2 alt2"><code class="php plain">{</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">static</code> <code class="php variable">$database</code><code class="php plain">;</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">protected</code> <code class="php keyword">static</code> <code class="php variable">$table</code><code class="php plain">;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">function</code> <code class="php plain">__construct() {</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">self::getConnection();</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">private</code> <code class="php keyword">static</code> <code class="php keyword">function</code> <code class="php plain">getConnection (){</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">require_once</code><code class="php plain">(</code><code class="php string">'Database.php'</code><code class="php plain">);</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">self::</code><code class="php variable">$database</code> <code class="php plain">= Database::getConnection(DB_PROVIDER, DB_HOST, DB_USER, DB_PASSWORD, DB_DB);</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">static</code> <code class="php keyword">function</code> <code class="php plain">find(</code><code class="php variable">$id</code><code class="php plain">) {</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$results</code> <code class="php plain">= self::where(</code><code class="php string">'id'</code><code class="php plain">,</code><code class="php variable">$id</code><code class="php plain">);</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$results</code><code class="php plain">[0];</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">static</code> <code class="php keyword">function</code> <code class="php plain">where(</code><code class="php variable">$field</code><code class="php plain">, </code><code class="php variable">$value</code><code class="php plain">) {&nbsp; </code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$obj</code> <code class="php plain">= null;</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">self::getConnection();</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php string">"SELECT * FROM "</code><code class="php plain">.</code><code class="php keyword">static</code><code class="php plain">::</code><code class="php variable">$table</code><code class="php plain">.</code><code class="php string">" WHERE "</code><code class="php plain">.</code><code class="php variable">$field</code><code class="php plain">.</code><code class="php string">" = ?"</code><code class="php plain">;</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$results</code> <code class="php plain">= self::</code><code class="php variable">$database</code><code class="php plain">-&gt;execute(</code><code class="php variable">$query</code><code class="php plain">,null,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php variable">$value</code><code class="php plain">));</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$results</code><code class="php plain">){</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$class</code> <code class="php plain">= get_called_class();</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">for</code> <code class="php plain">(</code><code class="php variable">$i</code> <code class="php plain">= 0; </code><code class="php variable">$i</code> <code class="php plain">&lt; sizeof(</code><code class="php variable">$results</code><code class="php plain">); </code><code class="php variable">$i</code><code class="php plain">++) {</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$obj</code><code class="php plain">[] = </code><code class="php keyword">new</code> <code class="php variable">$class</code><code class="php plain">(</code><code class="php variable">$results</code><code class="php plain">[</code><code class="php variable">$i</code><code class="php plain">]);</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$obj</code><code class="php plain">;</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">static</code> <code class="php keyword">function</code> <code class="php plain">all(</code><code class="php variable">$order</code> <code class="php plain">= null) {</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$objs</code> <code class="php plain">= null;</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">self::getConnection();</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php string">"SELECT * FROM "</code><code class="php plain">.</code><code class="php keyword">static</code><code class="php plain">::</code><code class="php variable">$table</code><code class="php plain">;</code></div><div class="line number42 index41 alt1">&nbsp;</div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$order</code><code class="php plain">){</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">.= </code><code class="php variable">$order</code><code class="php plain">;</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$results</code> <code class="php plain">= self::</code><code class="php variable">$database</code><code class="php plain">-&gt;execute(</code><code class="php variable">$query</code><code class="php plain">,null, null);</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$results</code><code class="php plain">){</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$class</code> <code class="php plain">= get_called_class();</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$results</code> <code class="php keyword">as</code> <code class="php variable">$index</code> <code class="php plain">=&gt; </code><code class="php variable">$obj</code><code class="php plain">){</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$objs</code><code class="php plain">[] = </code><code class="php keyword">new</code> <code class="php variable">$class</code><code class="php plain">(</code><code class="php variable">$obj</code><code class="php plain">);</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number55 index54 alt2">&nbsp;</div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$objs</code><code class="php plain">;</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">save(){</code></div><div class="line number60 index59 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$values</code> <code class="php plain">= get_object_vars(</code><code class="php variable">$this</code><code class="php plain">);</code></div><div class="line number61 index60 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$filtered</code> <code class="php plain">= null;</code></div><div class="line number62 index61 alt1">&nbsp;</div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$values</code> <code class="php keyword">as</code> <code class="php variable">$key</code> <code class="php plain">=&gt; </code><code class="php variable">$value</code><code class="php plain">){</code></div><div class="line number64 index63 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$value</code> <code class="php plain">!== null &amp;&amp; </code><code class="php variable">$value</code> <code class="php plain">!== </code><code class="php string">''</code> <code class="php plain">&amp;&amp; </code><code class="php functions">strpos</code><code class="php plain">(</code><code class="php variable">$key</code><code class="php plain">,</code><code class="php string">'obj_'</code><code class="php plain">) === false</code></div><div class="line number65 index64 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&amp;&amp; </code><code class="php variable">$key</code> <code class="php plain">!== </code><code class="php string">'id'</code><code class="php plain">){</code></div><div class="line number66 index65 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$value</code> <code class="php plain">=== false) { </code><code class="php variable">$value</code> <code class="php plain">= 0; }</code></div><div class="line number67 index66 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$filtered</code><code class="php plain">[</code><code class="php variable">$key</code><code class="php plain">] = </code><code class="php variable">$value</code><code class="php plain">;</code></div><div class="line number68 index67 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number69 index68 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number70 index69 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$columns</code> <code class="php plain">= </code><code class="php functions">array_keys</code><code class="php plain">(</code><code class="php variable">$filtered</code><code class="php plain">);</code></div><div class="line number71 index70 alt2">&nbsp;</div><div class="line number72 index71 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;id){</code></div><div class="line number73 index72 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$columns</code> <code class="php plain">= join (</code><code class="php string">" = ?, "</code><code class="php plain">, </code><code class="php variable">$columns</code><code class="php plain">);</code></div><div class="line number74 index73 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$columns</code> <code class="php plain">.= </code><code class="php string">' = ?'</code><code class="php plain">;</code></div><div class="line number75 index74 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php string">"UPDATE "</code><code class="php plain">.</code><code class="php keyword">static</code><code class="php plain">::</code><code class="php variable">$table</code><code class="php plain">.</code><code class="php string">" SET $columns WHERE id ="</code><code class="php plain">.</code><code class="php variable">$this</code><code class="php plain">-&gt;id;</code></div><div class="line number76 index75 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number77 index76 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number78 index77 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$params</code> <code class="php plain">= join(</code><code class="php string">", "</code><code class="php plain">, </code><code class="php functions">array_fill</code><code class="php plain">(0, </code><code class="php functions">count</code><code class="php plain">(</code><code class="php variable">$columns</code><code class="php plain">), </code><code class="php string">"?"</code><code class="php plain">));</code></div><div class="line number79 index78 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$columns</code> <code class="php plain">= join(</code><code class="php string">", "</code><code class="php plain">, </code><code class="php variable">$columns</code><code class="php plain">);</code></div><div class="line number80 index79 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$query</code> <code class="php plain">= </code><code class="php string">"INSERT INTO "</code><code class="php plain">.</code><code class="php keyword">static</code><code class="php plain">::</code><code class="php variable">$table</code><code class="php plain">.</code><code class="php string">" ($columns) VALUES ($params)"</code><code class="php plain">;</code></div><div class="line number81 index80 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number82 index81 alt1">&nbsp;</div><div class="line number83 index82 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= self::</code><code class="php variable">$database</code><code class="php plain">-&gt;execute(</code><code class="php variable">$query</code><code class="php plain">,null,</code><code class="php variable">$filtered</code><code class="php plain">);</code></div><div class="line number84 index83 alt1">&nbsp;</div><div class="line number85 index84 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$result</code><code class="php plain">){</code></div><div class="line number86 index85 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'error'</code> <code class="php plain">=&gt; false, </code><code class="php string">'message'</code> <code class="php plain">=&gt; self::</code><code class="php variable">$database</code><code class="php plain">-&gt;getInsertedID());</code></div><div class="line number87 index86 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number88 index87 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number89 index88 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$result</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'error'</code> <code class="php plain">=&gt; true, </code><code class="php string">'message'</code> <code class="php plain">=&gt; self::</code><code class="php variable">$database</code><code class="php plain">-&gt;getError());</code></div><div class="line number90 index89 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number91 index90 alt2">&nbsp;</div><div class="line number92 index91 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$result</code><code class="php plain">;</code></div><div class="line number93 index92 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number94 index93 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Lo primero que tenemos, son dos propiedades que son obligatorias para el resto de clases. El objeto que tiene la base de datos, y la tabla del modelo. En el caso de que estuviéramos hablando de una tabla de tiendas, ese valor tendría el valor <code>tiendas</code> por ejemplo. La clase, usa métodos de PHP 5.3.</p>
<p>Al construir la clase, lo que hace es obtener la conexión. Recordemos que gracias a que hicimos uso del patrón Singleton, varios objetos reutilizarán la misma clase.</p>
<p>Ahora tenemos dos métodos estáticos, esto es, que no es necesario crear una instancia para poder usarlos. El primero de ellos es <code>find</code>, que lo que hace es encontrar un elemento por su <code>id</code>. Devuelve un objeto de la misma clase, con todos los campos rellenos.</p>
<p>El siguiente método es <code>all</code>, que nos permite traernos todos los elementos de una tabla, y le pasamos un parámetro opcional de ordenación a la consulta. Devuelve una matriz de objetos.</p>
<p>El siguiente método, el método <code>save</code>, ya no es público. Este método está encargado de crear o actualizar un objeto en la base de datos. </p>
<h3>¿Qué nos queda?</h3>
<p>¡Ahh sí! ¡Implementar una clase!</p>
<p>Veamos por ejemplo una clase del siguiente artículo de nuestro <a title="Localizador de tiendas con PHP, jQuery Mobile y MySQL – Parte 1" href="http://www.funcion13.com/2013/01/11/localizador-tiendas-php-jquery-mobile-mysql-parte-1/">localizador de tiendas</a>.</p>
<p>La clase es <code>Provincia</code>, que es la más sencilla de todas:</p>
<div><div id="highlighter_241312" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">class</code> <code class="php plain">Provincia </code><code class="php keyword">extends</code> <code class="php plain">ORM</code></div><div class="line number2 index1 alt1"><code class="php plain">{</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$id</code><code class="php plain">, </code><code class="php variable">$nombre</code><code class="php plain">;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">protected</code> <code class="php keyword">static</code> <code class="php variable">$table</code> <code class="php plain">= </code><code class="php string">'provincias'</code><code class="php plain">;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">__construct(</code><code class="php variable">$data</code><code class="php plain">){</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">parent::__construct();</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$data</code> <code class="php plain">&amp;&amp; sizeof(</code><code class="php variable">$data</code><code class="php plain">)) { </code><code class="php variable">$this</code><code class="php plain">-&gt;populateFromRow(</code><code class="php variable">$data</code><code class="php plain">); }</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">populateFromRow(</code><code class="php variable">$data</code><code class="php plain">){</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;id = isset(</code><code class="php variable">$data</code><code class="php plain">[</code><code class="php string">'id'</code><code class="php plain">]) ? </code><code class="php functions">intval</code><code class="php plain">(</code><code class="php variable">$data</code><code class="php plain">[</code><code class="php string">'id'</code><code class="php plain">]) : null;</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;nombre = isset(</code><code class="php variable">$data</code><code class="php plain">[</code><code class="php string">'nombre'</code><code class="php plain">]) ? </code><code class="php variable">$data</code><code class="php plain">[</code><code class="php string">'nombre'</code><code class="php plain">] : null;</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number15 index14 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Como ves, la table es realmente sencilla. El constructor recibe los datos en una matriz. Llama al constructor padre, el ORM, y rellena los datos realizando validaciones sencillas.</p>
<p>De esta forma, podríamos hacer algo así:</p>
<div><div id="highlighter_416432" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php variable">$provincias</code> <code class="php plain">= Provincia::all(</code><code class="php string">' ORDER BY nombre'</code><code class="php plain">);</code></div></div></td></tr></tbody></table></div></div>
<p>Y obtendríamos algo como esto:</p>
<div><div id="highlighter_449042" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">Array</code></div><div class="line number2 index1 alt1"><code class="php plain">(</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[0] =&gt; Provincia Object</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">(</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[id] =&gt; 27</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[nombre] =&gt; Álava</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[1] =&gt; Provincia Object</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">(</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[id] =&gt; 12</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[nombre] =&gt; Albacete</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[2] =&gt; Provincia Object</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">(</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[id] =&gt; 20</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[nombre] =&gt; Alicante</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[3] =&gt; Provincia Object</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">(</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[id] =&gt; 49</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[nombre] =&gt; Almería</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">)</code></div><div class="line number26 index25 alt1"><code class="php plain">...</code></div></div></td></tr></tbody></table></div></div>
<p>Así pues, esto es todo por ahora. Ahora ya podemos ponernos manos a la obra con la siguiente parte del tutorial y esto nos servirá de base en otros artículos.</p>
<p>Si el artículo te pareció interesante, útil o incluso equivocado, por favor considera el dejar un comentario. ¡Lo apreciaré mucho!</p>
<p><a id="dd_end"></a>
</p><div class="dd_outer">
<div class="dd_inner">
<div id="dd_ajax_float">
<div class="dd_button_v"><script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/plusone.js" gapi_processed="true"></script><div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 50px; height: 60px; background: transparent;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 50px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 60px;" tabindex="0" vspace="0" width="100%" id="I0_1404965933041" name="I0_1404965933041" src="./Creando un pequeño ORM en PHP_files/fastbutton.htm" data-gapiattached="true" title="+1"></iframe></div></div>
<div style="clear:left"></div>
<div class="dd_button_v"><iframe src="./Creando un pequeño ORM en PHP_files/like.htm" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:50px; height:62px;" allowtransparency="true"></iframe></div>
<div style="clear:left"></div>
<div class="dd_button_v"><iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="./Creando un pequeño ORM en PHP_files/tweet_button.1404859412.htm" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-vertical" title="Twitter Tweet Button" data-twttr-rendered="true" style="width: 70px; height: 62px;"></iframe><script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/widgets.js"></script></div>
<div style="clear:left"></div>
</div>
</div>
</div>
<p><script type="text/javascript">var dd_offset_from_content = 40;var dd_top_offset_from_content = 0;var dd_override_start_anchor_id = "";var dd_override_top_offset = "";</script><script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/diggdigg-floating-bar.js"></script></p>
		<footer>
				<section id="about_the_author"><h3>Sobre el autor</h3><div class="author_content"><div class="gravatar"><img alt="" src="./Creando un pequeño ORM en PHP_files/f707447520a89130f6728260b478d5b0" class="avatar avatar-60 photo" height="60" width="60"></div><div class="author_info"><div class="author_name">Antonio Laguna</div><p class="author_desc">Programador Front-end en Gamesys. Trabajando con JavaScript y HTML5 desde el corazón de Londres <br><br><a href="mailto:a.laguna@funcion13.com"><img src="./Creando un pequeño ORM en PHP_files/email_16.png"></a> <a href="http://twitter.com/Belelros"><img src="./Creando un pequeño ORM en PHP_files/twitter_16.png"></a>  <a href="http://www.facebook.com/Belelros" title="Encuéntrame en Facebook"><img src="./Creando un pequeño ORM en PHP_files/facebook_16.png"></a>  <a rel="me" href="https://plus.google.com/101612452836973147969/" title="Añádeme en Google+"><img src="./Creando un pequeño ORM en PHP_files/gplus-16.png" width="16" height="16"></a>  <a href="http://www.linkedin.com/profile/view?id=147356205&trk=tab_pro" title="Encuéntrame en Linkedin"><img src="./Creando un pequeño ORM en PHP_files/linkedin_16.png"></a>  <a href="http://stackoverflow.com/users/664071/" title="Mi perfil en StackOverflow"><img src="./Creando un pequeño ORM en PHP_files/stack-overflow.png" width="16" height="16"></a> <a href="https://github.com/Belelros" title="Mi perfil en Github"><img src="./Creando un pequeño ORM en PHP_files/github_32.png" width="16" height="16"></a> <a href="http://teamtreehouse.com/ALaguna" title="Mis logros en Treehouse"><img src="./Creando un pequeño ORM en PHP_files/treehouse.png" width="16" height="16"></a></p></div><div class="clearboth"></div></div></section>				<div class="related_popular_wrap">
			<div class="one_half">
				<h3>Entradas relacionadas</h3><section class="related_posts_wrap"><ul class="posts_list"><li><a class="thumbnail" href="http://www.funcion13.com/2013/05/21/novedades-visuales-en-google-maps/" title="Novedades visuales en Google Maps"><img width="65" height="65" src="./Creando un pequeño ORM en PHP_files/googleio2013-150x150.jpg" class="attachment-65x65 wp-post-image" alt="Novedades visuales en Google Maps" title="Novedades visuales en Google Maps"></a><div class="post_extra_info"><a class="post_title" href="http://www.funcion13.com/2013/05/21/novedades-visuales-en-google-maps/" title="Novedades visuales en Google Maps" rel="bookmark">Novedades visuales en Google Maps</a><time datetime="2013-05-21">21 mayo, 2013</time></div><div class="clearboth"></div></li><li><a class="thumbnail" href="http://www.funcion13.com/2013/04/13/localizador-tiendas-php-jquery-mobile-mysql-parte-3/" title="Localizador de tiendas con PHP, jQuery Mobile y MySQL – Parte 3"></a><div class="post_extra_info"><a class="post_title" href="http://www.funcion13.com/2013/04/13/localizador-tiendas-php-jquery-mobile-mysql-parte-3/" title="Localizador de tiendas con PHP, jQuery Mobile y MySQL – Parte 3" rel="bookmark">Localizador de tiendas con PHP, jQuery Mobile y MySQL – Parte 3</a><time datetime="2013-04-13">13 abril, 2013</time></div><div class="clearboth"></div></li><li><a class="thumbnail" href="http://www.funcion13.com/2013/04/09/orientacion-a-objetos-en-php-para-principiantes/" title="Orientación a objetos en PHP para principiantes"><img width="65" height="65" src="./Creando un pequeño ORM en PHP_files/oop-150x150.jpg" class="attachment-65x65 wp-post-image" alt="Orientación a objetos en PHP para principiantes" title="Orientación a objetos en PHP para principiantes"></a><div class="post_extra_info"><a class="post_title" href="http://www.funcion13.com/2013/04/09/orientacion-a-objetos-en-php-para-principiantes/" title="Orientación a objetos en PHP para principiantes" rel="bookmark">Orientación a objetos en PHP para principiantes</a><time datetime="2013-04-09">9 abril, 2013</time></div><div class="clearboth"></div></li></ul></section>			</div>
			<div class="one_half last">
				<h3>Entradas populares</h3><section class="popular_posts_wrap"><ul class="posts_list"><li><a class="thumbnail" href="http://www.funcion13.com/2012/04/12/como-realizar-peticiones-ajax-cross-domain-jsonp-jquery/" title="Cómo realizar peticiones AJAX cross-domain usando JSONP y jQuery"><img width="65" height="65" src="./Creando un pequeño ORM en PHP_files/banner-jsonp-150x150.jpg" class="attachment-65x65 wp-post-image" alt="Cómo realizar peticiones AJAX cross-domain usando JSONP y jQuery" title="Cómo realizar peticiones AJAX cross-domain usando JSONP y jQuery"></a><div class="post_extra_info"><a class="post_title" href="http://www.funcion13.com/2012/04/12/como-realizar-peticiones-ajax-cross-domain-jsonp-jquery/" title="Cómo realizar peticiones AJAX cross-domain usando JSONP y jQuery" rel="bookmark">Cómo realizar peticiones AJAX cross-domain usando JSONP y jQuery</a><time datetime="2012-04-12">12 abril, 2012</time></div><div class="clearboth"></div></li><li><a class="thumbnail" href="http://www.funcion13.com/2012/09/08/ocultando-y-mostrando-multiples-marcadores-en-google-maps/" title="Ocultando y mostrando múltiples marcadores en Google Maps"><img width="65" height="65" src="./Creando un pequeño ORM en PHP_files/banner-google-maps-150x150.jpg" class="attachment-65x65 wp-post-image" alt="Ocultando y mostrando múltiples marcadores en Google Maps" title="Ocultando y mostrando múltiples marcadores en Google Maps"></a><div class="post_extra_info"><a class="post_title" href="http://www.funcion13.com/2012/09/08/ocultando-y-mostrando-multiples-marcadores-en-google-maps/" title="Ocultando y mostrando múltiples marcadores en Google Maps" rel="bookmark">Ocultando y mostrando múltiples marcadores en Google Maps</a><time datetime="2012-09-08">8 septiembre, 2012</time></div><div class="clearboth"></div></li><li><a class="thumbnail" href="http://www.funcion13.com/2012/02/08/lista-de-elementos-ordenables-y-editables-usando-html5-jquery-php-y-mysql/" title="Lista de elementos ordenables y editables usando HTML5, jQuery, PHP y MySQL"><img width="65" height="65" src="./Creando un pequeño ORM en PHP_files/tutorial-lista-tareas-150x150.jpg" class="attachment-65x65 wp-post-image" alt="Lista de elementos ordenables y editables usando HTML5, jQuery, PHP y MySQL" title="Lista de elementos ordenables y editables usando HTML5, jQuery, PHP y MySQL"></a><div class="post_extra_info"><a class="post_title" href="http://www.funcion13.com/2012/02/08/lista-de-elementos-ordenables-y-editables-usando-html5-jquery-php-y-mysql/" title="Lista de elementos ordenables y editables usando HTML5, jQuery, PHP y MySQL" rel="bookmark">Lista de elementos ordenables y editables usando HTML5, jQuery, PHP y MySQL</a><time datetime="2012-02-08">8 febrero, 2012</time></div><div class="clearboth"></div></li></ul></section>			</div>
			<div class="clearboth"></div>
		</div>
					</footer>
	<div class="clearboth"></div>
</article>
<div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" tabindex="0" title="Disqus" width="100%" src="./Creando un pequeño ORM en PHP_files/saved_resource.htm" scrolling="no" horizontalscrolling="no" verticalscrolling="no" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 4881px !important;"></iframe></div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/';
    var disqus_identifier = '2573 http://www.funcion13.com/?p=2573';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'funcion13';
    var disqus_title = "Creando un pequeño ORM en PHP";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = '?cf_action=sync_comments&post_id=2573';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
            {
                'author_name':    "Localizador de tiendas con PHP, jQuery Mobile y MySQL – Parte 2",
                'author_url':    "http:\/\/www.funcion13.com\/2013\/03\/11\/localizador-de-tiendas-con-php-jquery-mobile-y-mysql-parte-2\/",
                'date':            "04\/12\/2013 09:40 AM",
                'excerpt':        "[...] Como pronto descubriréis, todos los modelos heredan de la clase ORM que aprendimos a desarrollar y usar en este &hellip;",
                'type':            "pingback"            }
        ],
        'trackback_url': "http:\/\/www.funcion13.com\/2013\/02\/27\/creando-un-pequeno-orm-en-php\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>
		</div>
		<aside id="sidebar">
	<div id="sidebar_content" class="lessgap"><section id="search-4" class="widget widget_search"><form method="get" id="searchform" action="http://www.funcion13.com/">
	<input type="text" class="text_input" value="Buscar..." name="s" id="s" onfocus="if(this.value == &#39;Buscar...&#39;) {this.value = &#39;&#39;;}" onblur="if (this.value == &#39;&#39;) {this.value = &#39;Buscar...&#39;;}">
	<button type="submit" class="button gray"><span>Buscar</span></button>
</form></section><section id="text-3" class="widget widget_text">			<div class="textwidget"><div id="suscribete">
	<a id="suscriRSS" href="http://feeds.feedburner.com/Funcion13" class="elemento-suscripcion">
		<span class="icono"></span>
		<span class="titulo">Suscríbete a nuestro RSS</span>
	</a>
	<a id="suscriMail" href="http://feedburner.google.com/fb/a/mailverify?uri=Funcion13&loc=es_ES" class="elemento-suscripcion">
		<span class="icono"></span>
		<span class="titulo">Suscríbete por Email</span>
	</a>
	<a id="suscriTwitter" href="http://twitter.com/Funcion13" class="elemento-suscripcion">
		<span class="icono"></span>
		<span class="titulo">Síguenos en Twitter</span>
	</a>
</div>			</div>
		</section><section id="text-2" class="widget widget_text"><h3 class="widgettitle">Adquiere mi último libro</h3>			<div class="textwidget"><iframe width="160" height="400" style="margin-left: 45px;" src="./Creando un pequeño ORM en PHP_files/embed.htm" frameborder="0" allowtransparency="true"></iframe>

<iframe width="160" height="400" style="margin-left: 45px;" src="./Creando un pequeño ORM en PHP_files/embed(1).htm" frameborder="0" allowtransparency="true"></iframe></div>
		</section><section id="text-4" class="widget widget_text"><h3 class="widgettitle">Ultimos comentarios</h3>			<div class="textwidget"><div id="recentcomments" class="dsq-widget"><script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/recent_comments_widget.js"></script> <style type="text/css" media="screen">	 .dsq-widget ul.dsq-widget-list {	 padding: 0;	 margin: 0;	 text-align: left;	 }	 img.dsq-widget-avatar {	 width: 32px;	 height: 32px;	 border: 0px;	 margin: 0px;	 padding: 0px 3px 3px 0px;	 float: left;	 }	 a.dsq-widget-user {	 font-weight: bold;	 }	 a.dsq-widget-thread {	 font-weight: bold;	 }	 p.dsq-widget-meta {	 clear: both;	 font-size: 80%;	 padding: 0;	 margin: 0;	 }	 li.dsq-widget-item {	 margin: 15px 0;	 list-style-type: none;	 clear: both;	 }	 span.dsq-widget-clout {	 padding: 0 2px;	 background-color: #ff7300;	 color: #fff;	 }	 table.dsq-widget-horiz td {	 padding-right: 15px;	 }	 .dsq-widget-comment p {	 display: inline;	 }	 </style>	 <ul class="dsq-widget-list">	 <li class="dsq-widget-item">	 <img class="dsq-widget-avatar" src="./Creando un pequeño ORM en PHP_files/noavatar92.png">	 pablo1987	 <span class="dsq-widget-comment"><p>Ante todo felicitarte por esta maravillosa entrada, llevo casi dos semanas buceando y es lo mejor y más completo para hacerse una idea de lo que hay fuera. Actualmente soy administrador de sistemas...</p></span>	 <p class="dsq-widget-meta"><a href="http://www.funcion13.com/2013/10/09/un-programador-en-londres/">Un programador en Londres</a>&nbsp;·&nbsp;<a href="http://www.funcion13.com/2013/10/09/un-programador-en-londres/#comment-1475039283">1 day ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <a href="http://disqus.com/disqus_A7TgvWtYoE/"><img class="dsq-widget-avatar" src="./Creando un pequeño ORM en PHP_files/noavatar92.png"></a>	 <a class="dsq-widget-user" href="http://disqus.com/disqus_A7TgvWtYoE/">David Valbuena</a>	 <span class="dsq-widget-comment"><p>Muy buen Tutorial, pero tengo una duda y espero me pueda ayudar... Al momento de yo recibir el archivo json obtengo algo parecido a esto: [{ "0": "1", "idparqueadero": "1", "1": "Cable plaza",...</p></span>	 <p class="dsq-widget-meta"><a href="http://www.funcion13.com/2012/04/12/como-realizar-peticiones-ajax-cross-domain-jsonp-jquery/">Cómo realizar peticiones AJAX cross-domain usando JSONP y jQuery</a>&nbsp;·&nbsp;<a href="http://www.funcion13.com/2012/04/12/como-realizar-peticiones-ajax-cross-domain-jsonp-jquery/#comment-1472475143">2 days ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <img class="dsq-widget-avatar" src="./Creando un pequeño ORM en PHP_files/noavatar92.png">	 Pablo	 <span class="dsq-widget-comment"><p>no supe como poner este codigo en el mio :/ .. em podrias ayudar por favor</p></span>	 <p class="dsq-widget-meta"><a href="http://www.funcion13.com/2012/09/08/ocultando-y-mostrando-multiples-marcadores-en-google-maps/">Ocultando y mostrando múltiples marcadores en Google Maps</a>&nbsp;·&nbsp;<a href="http://www.funcion13.com/2012/09/08/ocultando-y-mostrando-multiples-marcadores-en-google-maps/#comment-1460611759">1 week ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <img class="dsq-widget-avatar" src="./Creando un pequeño ORM en PHP_files/noavatar92.png">	 Armando M.	 <span class="dsq-widget-comment"><p>hola buen dia, quisiera saber como puedo añadirle el infowindows, gracias</p></span>	 <p class="dsq-widget-meta"><a href="http://www.funcion13.com/2012/09/08/ocultando-y-mostrando-multiples-marcadores-en-google-maps/">Ocultando y mostrando múltiples marcadores en Google Maps</a>&nbsp;·&nbsp;<a href="http://www.funcion13.com/2012/09/08/ocultando-y-mostrando-multiples-marcadores-en-google-maps/#comment-1452088592">2 weeks ago</a></p>	 </li>	 <li class="dsq-widget-item">	 <img class="dsq-widget-avatar" src="./Creando un pequeño ORM en PHP_files/noavatar92.png">	 john	 <span class="dsq-widget-comment"><p>hola saludos! necesito implementar un progress bar que me muestre el porcentaje de carga en función al tiempo de respuesta del mi petición ajax. por favor si me pudera dar alguna sugerencia</p></span>	 <p class="dsq-widget-meta"><a href="http://www.funcion13.com/2012/04/25/cargando-contenido-ajax-con-jquery-usando-imagen-de-cargando/">Cargando contenido AJAX con jQuery usando imagen de cargando</a>&nbsp;·&nbsp;<a href="http://www.funcion13.com/2012/04/25/cargando-contenido-ajax-con-jquery-usando-imagen-de-cargando/#comment-1445766173">2 weeks ago</a></p>	 </li>	 </ul></div></div>
		</section><section id="linkcat-2" class="widget widget_links"><h3 class="widgettitle">De interés</h3>
	<ul class="xoxo blogroll">
<li><a href="http://bikebus.funcion13.com/" rel="me" title="Información sobre autobuses y bicicletas en Sevilla desde cualquier móvil: iPhone, Android o BlackBerry">BuSeVici</a>
Información sobre autobuses y bicicletas en Sevilla desde cualquier móvil: iPhone, Android o BlackBerry</li>
<li><a href="http://www.funcion13.com/2012/03/09/ya-esta-disponible-domine-las-aplicaciones-web-moviles-con-jquery-mobile/" title="Hazte con la traducción de este completo libro para aprender a usar jQuery Mobile">Domine las aplicaciones móviles con jQuery Mobile</a>
Hazte con la traducción de este completo libro para aprender a usar jQuery Mobile</li>
<li><a href="https://github.com/Belelros/jQuery-ColorPicker" title="Pequeño plugin para generar un selector de colores a lo Photoshop">jQuery ColorPicker</a>
Pequeño plugin para generar un selector de colores a lo Photoshop</li>
<li><a href="http://belelros.github.com/jqueryTranslator/" rel="me" title="Pequeño plugin que te ayudará en la traducción de sitios webs estáticos.">jQuery Translator</a>
Pequeño plugin que te ayudará en la traducción de sitios webs estáticos.</li>
<li><a href="http://www.funcion13.com/2012/05/04/resuelve-tus-dudas-de-javascript-jquery-jquery-mobile-y-mas/" rel="me" title="Pregunta tus dudas sobre los temas que tratamos en este Blog. Si es interesante y no ha sido tratado, ¡quizá lo tratemos en el blog!">Resuelve tus dudas</a>
Pregunta tus dudas sobre los temas que tratamos en este Blog. Si es interesante y no ha sido tratado, ¡quizá lo tratemos en el blog!</li>

	</ul>
</section>
<section id="categories-3" class="widget widget_categories"><h3 class="widgettitle">Categorías</h3>		<ul>
	<li class="cat-item cat-item-116"><a href="http://www.funcion13.com/category/administracion/" title="Ver todas las entradas archivadas en Administración">Administración</a> (1)
</li>
	<li class="cat-item cat-item-78"><a href="http://www.funcion13.com/category/apache/" title="Ver todas las entradas archivadas en Apache">Apache</a> (1)
</li>
	<li class="cat-item cat-item-19"><a href="http://www.funcion13.com/category/aplicaciones-web/" title="Ver todas las entradas archivadas en Aplicaciones web">Aplicaciones web</a> (2)
</li>
	<li class="cat-item cat-item-122"><a href="http://www.funcion13.com/category/programacion/css3-programacion/" title="Ver todas las entradas archivadas en CSS3">CSS3</a> (1)
</li>
	<li class="cat-item cat-item-23"><a href="http://www.funcion13.com/category/diseno-web/" title="Ver todas las entradas archivadas en Diseño">Diseño</a> (1)
</li>
	<li class="cat-item cat-item-80"><a href="http://www.funcion13.com/category/programacion/google-maps-programacion/" title="Ver todas las entradas archivadas en Google Maps">Google Maps</a> (8)
</li>
	<li class="cat-item cat-item-25"><a href="http://www.funcion13.com/category/programacion/html/" title="Ver todas las entradas archivadas en HTML">HTML</a> (10)
</li>
	<li class="cat-item cat-item-3"><a href="http://www.funcion13.com/category/informacion/" title="Ver todas las entradas archivadas en Información">Información</a> (1)
</li>
	<li class="cat-item cat-item-53"><a href="http://www.funcion13.com/category/programacion/javascript-programacion/" title="Ver todas las entradas archivadas en JavaScript">JavaScript</a> (11)
</li>
	<li class="cat-item cat-item-18"><a href="http://www.funcion13.com/category/programacion/jquery/" title="Ver todas las entradas archivadas en jQuery">jQuery</a> (20)
</li>
	<li class="cat-item cat-item-45"><a href="http://www.funcion13.com/category/programacion/jquery-mobile-programacion/" title="Ver todas las entradas archivadas en jQuery Mobile">jQuery Mobile</a> (8)
</li>
	<li class="cat-item cat-item-37"><a href="http://www.funcion13.com/category/programacion/mysql/" title="Ver todas las entradas archivadas en MySQL">MySQL</a> (4)
</li>
	<li class="cat-item cat-item-4"><a href="http://www.funcion13.com/category/noticias/" title="Ver todas las entradas archivadas en Noticias">Noticias</a> (14)
</li>
	<li class="cat-item cat-item-123"><a href="http://www.funcion13.com/category/personal/" title="Ver todas las entradas archivadas en Personal">Personal</a> (2)
</li>
	<li class="cat-item cat-item-36"><a href="http://www.funcion13.com/category/programacion/php-programacion/" title="Ver todas las entradas archivadas en PHP">PHP</a> (12)
</li>
	<li class="cat-item cat-item-17"><a href="http://www.funcion13.com/category/programacion/" title="Ver todas las entradas archivadas en Programación">Programación</a> (28)
</li>
	<li class="cat-item cat-item-115"><a href="http://www.funcion13.com/category/seguridad/" title="Ver todas las entradas archivadas en Seguridad">Seguridad</a> (2)
</li>
	<li class="cat-item cat-item-86"><a href="http://www.funcion13.com/category/programacion/sql/" title="Ver todas las entradas archivadas en SQL">SQL</a> (4)
</li>
	<li class="cat-item cat-item-5"><a href="http://www.funcion13.com/category/tecnologia/" title="Ver todas las entradas archivadas en Tecnología">Tecnología</a> (1)
</li>
		</ul>
</section><section id="opacity_tags-2" class="widget widget_opacity_tags" style="margin-bottom: 20px;"><h3 class="widgettitle">Busca por etiquetas</h3>							<div id="opacity-tags-list">
								<a href="http://www.funcion13.com/tag/jquery-2/" class="tag-link-26" title="16 temas" style="font-size: 14px; opacity: 0.9885057471264368;" id="87">jquery</a> <a href="http://www.funcion13.com/tag/jquery-mobile/" class="tag-link-20" title="8 temas" style="font-size: 14px; opacity: 0.9770114942528736;" id="86">jquery mobile</a> <a href="http://www.funcion13.com/tag/ajax/" class="tag-link-31" title="7 temas" style="font-size: 14px; opacity: 0.9655172413793104;" id="85">ajax</a> <a href="http://www.funcion13.com/tag/javascript/" class="tag-link-27" title="6 temas" style="font-size: 14px; opacity: 0.9540229885057472;" id="84">javascript</a> <a href="http://www.funcion13.com/tag/php/" class="tag-link-33" title="5 temas" style="font-size: 14px; opacity: 0.9425287356321839;" id="83">php</a> <a href="http://www.funcion13.com/tag/google-maps/" class="tag-link-29" title="5 temas" style="font-size: 14px; opacity: 0.9310344827586207;" id="82">google maps</a> <a href="http://www.funcion13.com/tag/html5/" class="tag-link-21" title="5 temas" style="font-size: 14px; opacity: 0.9195402298850575;" id="81">html5</a> <a href="http://www.funcion13.com/tag/cache/" class="tag-link-75" title="2 temas" style="font-size: 14px; opacity: 0.9080459770114943;" id="80">cache</a> <a href="http://www.funcion13.com/tag/deferred/" class="tag-link-61" title="2 temas" style="font-size: 14px; opacity: 0.896551724137931;" id="79">deferred</a> <a href="http://www.funcion13.com/tag/prototype/" class="tag-link-55" title="2 temas" style="font-size: 14px; opacity: 0.8850574712643678;" id="78">prototype</a> <a href="http://www.funcion13.com/tag/localstorage/" class="tag-link-22" title="2 temas" style="font-size: 14px; opacity: 0.8735632183908046;" id="77">localStorage</a> <a href="http://www.funcion13.com/tag/plugin/" class="tag-link-40" title="2 temas" style="font-size: 14px; opacity: 0.8620689655172414;" id="76">plugin</a> <a href="http://www.funcion13.com/tag/github/" class="tag-link-42" title="2 temas" style="font-size: 14px; opacity: 0.8505747126436781;" id="75">github</a> <a href="http://www.funcion13.com/tag/api/" class="tag-link-60" title="1 tema" style="font-size: 14px; opacity: 0.8390804597701149;" id="74">api</a> <a href="http://www.funcion13.com/tag/twitter/" class="tag-link-59" title="1 tema" style="font-size: 14px; opacity: 0.8275862068965517;" id="73">twitter</a> <a href="http://www.funcion13.com/tag/inheritance/" class="tag-link-58" title="1 tema" style="font-size: 14px; opacity: 0.8160919540229885;" id="72">inheritance</a> <a href="http://www.funcion13.com/tag/promise/" class="tag-link-62" title="1 tema" style="font-size: 14px; opacity: 0.8045977011494253;" id="71">promise</a> <a href="http://www.funcion13.com/tag/closure/" class="tag-link-56" title="1 tema" style="font-size: 14px; opacity: 0.7931034482758621;" id="70">closure</a> <a href="http://www.funcion13.com/tag/scope/" class="tag-link-57" title="1 tema" style="font-size: 14px; opacity: 0.7816091954022989;" id="69">scope</a> <a href="http://www.funcion13.com/tag/eventos/" class="tag-link-68" title="1 tema" style="font-size: 14px; opacity: 0.7701149425287357;" id="68">eventos</a> <a href="http://www.funcion13.com/tag/promesa/" class="tag-link-63" title="1 tema" style="font-size: 14px; opacity: 0.7586206896551724;" id="67">promesa</a> <a href="http://www.funcion13.com/tag/elated/" class="tag-link-47" title="1 tema" style="font-size: 14px; opacity: 0.7471264367816092;" id="66">elated</a> <a href="http://www.funcion13.com/tag/usabilidad/" class="tag-link-69" title="1 tema" style="font-size: 14px; opacity: 0.735632183908046;" id="65">usabilidad</a> <a href="http://www.funcion13.com/tag/google-analytics/" class="tag-link-67" title="1 tema" style="font-size: 14px; opacity: 0.7241379310344828;" id="64">google analytics</a> <a href="http://www.funcion13.com/tag/localization/" class="tag-link-66" title="1 tema" style="font-size: 14px; opacity: 0.7126436781609196;" id="63">localization</a> <a href="http://www.funcion13.com/tag/navegacion-ajax/" class="tag-link-64" title="1 tema" style="font-size: 14px; opacity: 0.7011494252873564;" id="62">navegacion ajax</a> <a href="http://www.funcion13.com/tag/traduccion/" class="tag-link-65" title="1 tema" style="font-size: 14px; opacity: 0.6896551724137931;" id="61">traduccion</a> <a href="http://www.funcion13.com/tag/asincrono/" class="tag-link-32" title="1 tema" style="font-size: 14px; opacity: 0.67816091954023;" id="60">asincrono</a> <a href="http://www.funcion13.com/tag/ebook/" class="tag-link-46" title="1 tema" style="font-size: 14px; opacity: 0.6666666666666666;" id="59">ebook</a> <a href="http://www.funcion13.com/tag/handlebars/" class="tag-link-49" title="1 tema" style="font-size: 14px; opacity: 0.6551724137931034;" id="58">handlebars</a> <a href="http://www.funcion13.com/tag/live/" class="tag-link-34" title="1 tema" style="font-size: 14px; opacity: 0.6436781609195402;" id="57">live</a> <a href="http://www.funcion13.com/tag/templating/" class="tag-link-50" title="1 tema" style="font-size: 14px; opacity: 0.632183908045977;" id="56">templating</a> <a href="http://www.funcion13.com/tag/plantillas/" class="tag-link-51" title="1 tema" style="font-size: 14px; opacity: 0.6206896551724138;" id="55">plantillas</a> <a href="http://www.funcion13.com/tag/on/" class="tag-link-35" title="1 tema" style="font-size: 14px; opacity: 0.6091954022988506;" id="54">on</a> <a href="http://www.funcion13.com/tag/mustache/" class="tag-link-52" title="1 tema" style="font-size: 14px; opacity: 0.5977011494252874;" id="53">mustache</a> <a href="http://www.funcion13.com/tag/js/" class="tag-link-54" title="1 tema" style="font-size: 14px; opacity: 0.5862068965517242;" id="52">js</a> <a href="http://www.funcion13.com/tag/google-api/" class="tag-link-28" title="1 tema" style="font-size: 14px; opacity: 0.5747126436781609;" id="51">google api</a> <a href="http://www.funcion13.com/tag/html-2/" class="tag-link-43" title="1 tema" style="font-size: 14px; opacity: 0.5632183908045977;" id="50">html</a> <a href="http://www.funcion13.com/tag/dom/" class="tag-link-44" title="1 tema" style="font-size: 14px; opacity: 0.5517241379310345;" id="49">dom</a> <a href="http://www.funcion13.com/tag/colorpicker/" class="tag-link-41" title="1 tema" style="font-size: 14px; opacity: 0.5402298850574713;" id="48">colorpicker</a> <a href="http://www.funcion13.com/tag/contenteditable/" class="tag-link-39" title="1 tema" style="font-size: 14px; opacity: 0.5287356321839081;" id="47">contenteditable</a> <a href="http://www.funcion13.com/tag/cdn/" class="tag-link-30" title="1 tema" style="font-size: 14px; opacity: 0.5172413793103449;" id="46">cdn</a> <a href="http://www.funcion13.com/tag/jquery-ui/" class="tag-link-38" title="1 tema" style="font-size: 14px; opacity: 0.5057471264367817;" id="45">jquery ui</a> <a href="http://www.funcion13.com/tag/busevici/" class="tag-link-70" title="1 tema" style="font-size: 14px; opacity: 0.49425287356321845;" id="44">busevici</a> <a href="http://www.funcion13.com/tag/jsonp/" class="tag-link-71" title="1 tema" style="font-size: 14px; opacity: 0.4827586206896552;" id="43">jsonp</a> <a href="http://www.funcion13.com/tag/photoshop/" class="tag-link-105" title="1 tema" style="font-size: 14px; opacity: 0.471264367816092;" id="42">photoshop</a> <a href="http://www.funcion13.com/tag/css3/" class="tag-link-106" title="1 tema" style="font-size: 14px; opacity: 0.45977011494252873;" id="41">css3</a> <a href="http://www.funcion13.com/tag/capa/" class="tag-link-107" title="1 tema" style="font-size: 14px; opacity: 0.4482758620689655;" id="40">capa</a> <a href="http://www.funcion13.com/tag/css/" class="tag-link-104" title="1 tema" style="font-size: 14px; opacity: 0.4367816091954023;" id="39">CSS</a> <a href="http://www.funcion13.com/tag/formulario/" class="tag-link-103" title="1 tema" style="font-size: 14px; opacity: 0.4252873563218391;" id="38">formulario</a> <a href="http://www.funcion13.com/tag/desarrollo-web/" class="tag-link-99" title="1 tema" style="font-size: 14px; opacity: 0.41379310344827586;" id="37">desarrollo web</a> <a href="http://www.funcion13.com/tag/trucos/" class="tag-link-100" title="1 tema" style="font-size: 14px; opacity: 0.40229885057471265;" id="36">trucos</a> <a href="http://www.funcion13.com/tag/cache-header/" class="tag-link-101" title="1 tema" style="font-size: 14px; opacity: 0.39080459770114945;" id="35">cache header</a> <a href="http://www.funcion13.com/tag/cabecera-cache/" class="tag-link-102" title="1 tema" style="font-size: 14px; opacity: 0.37931034482758624;" id="34">cabecera cache</a> <a href="http://www.funcion13.com/tag/layer/" class="tag-link-108" title="1 tema" style="font-size: 14px; opacity: 0.367816091954023;" id="33">layer</a> <a href="http://www.funcion13.com/tag/html5-type/" class="tag-link-110" title="1 tema" style="font-size: 14px; opacity: 0.3563218390804598;" id="32">html5 type</a> <a href="http://www.funcion13.com/tag/datetime/" class="tag-link-119" title="1 tema" style="font-size: 14px; opacity: 0.3448275862068966;" id="31">datetime</a> <a href="http://www.funcion13.com/tag/funcion/" class="tag-link-120" title="1 tema" style="font-size: 14px; opacity: 0.33333333333333337;" id="30">funcion</a> <a href="http://www.funcion13.com/tag/anonima/" class="tag-link-121" title="1 tema" style="font-size: 14px; opacity: 0.3218390804597701;" id="29">anonima</a> <a href="http://www.funcion13.com/tag/timestamp/" class="tag-link-118" title="1 tema" style="font-size: 14px; opacity: 0.3103448275862069;" id="28">timestamp</a> <a href="http://www.funcion13.com/tag/mysql-2/" class="tag-link-117" title="1 tema" style="font-size: 14px; opacity: 0.2988505747126437;" id="27">mysql</a> <a href="http://www.funcion13.com/tag/laravel/" class="tag-link-111" title="1 tema" style="font-size: 14px; opacity: 0.2873563218390805;" id="26">laravel</a> <a href="http://www.funcion13.com/tag/code-happy/" class="tag-link-112" title="1 tema" style="font-size: 14px; opacity: 0.27586206896551724;" id="25">code happy</a> <a href="http://www.funcion13.com/tag/geometria/" class="tag-link-113" title="1 tema" style="font-size: 14px; opacity: 0.26436781609195403;" id="24">geometria</a> <a href="http://www.funcion13.com/tag/distancia/" class="tag-link-114" title="1 tema" style="font-size: 14px; opacity: 0.25287356321839083;" id="23">distancia</a> <a href="http://www.funcion13.com/tag/developer-tools/" class="tag-link-98" title="1 tema" style="font-size: 14px; opacity: 0.24137931034482762;" id="22">developer tools</a> <a href="http://www.funcion13.com/tag/google-chrome/" class="tag-link-97" title="1 tema" style="font-size: 14px; opacity: 0.22988505747126436;" id="21">Google Chrome</a> <a href="http://www.funcion13.com/tag/imagen-cargando/" class="tag-link-81" title="1 tema" style="font-size: 14px; opacity: 0.21839080459770116;" id="20">imagen cargando</a> <a href="http://www.funcion13.com/tag/igual/" class="tag-link-82" title="1 tema" style="font-size: 14px; opacity: 0.20689655172413796;" id="19">igual</a> <a href="http://www.funcion13.com/tag/comparacion/" class="tag-link-83" title="1 tema" style="font-size: 14px; opacity: 0.1954022988505747;" id="18">comparacion</a> <a href="http://www.funcion13.com/tag/apache-2/" class="tag-link-79" title="1 tema" style="font-size: 14px; opacity: 0.1839080459770115;" id="17">apache</a> <a href="http://www.funcion13.com/tag/jquerytranslator/" class="tag-link-77" title="1 tema" style="font-size: 14px; opacity: 0.1724137931034483;" id="16">jqueryTranslator</a> <a href="http://www.funcion13.com/tag/cross-domain/" class="tag-link-72" title="1 tema" style="font-size: 14px; opacity: 0.16091954022988508;" id="15">cross-domain</a> <a href="http://www.funcion13.com/tag/peticion/" class="tag-link-73" title="1 tema" style="font-size: 14px; opacity: 0.14942528735632182;" id="14">peticion</a> <a href="http://www.funcion13.com/tag/actualizacion/" class="tag-link-74" title="1 tema" style="font-size: 14px; opacity: 0.13793103448275862;" id="13">actualizacion</a> <a href="http://www.funcion13.com/tag/evitar-cache/" class="tag-link-76" title="1 tema" style="font-size: 14px; opacity: 0.12643678160919541;" id="12">evitar cache</a> <a href="http://www.funcion13.com/tag/icono/" class="tag-link-84" title="1 tema" style="font-size: 14px; opacity: 0.1149425287356322;" id="11">icono</a> <a href="http://www.funcion13.com/tag/refrescar/" class="tag-link-85" title="1 tema" style="font-size: 14px; opacity: 0.10344827586206896;" id="10">refrescar</a> <a href="http://www.funcion13.com/tag/infowindow/" class="tag-link-93" title="1 tema" style="font-size: 14px; opacity: 0.09195402298850575;" id="9">infowindow</a> <a href="http://www.funcion13.com/tag/popup/" class="tag-link-94" title="1 tema" style="font-size: 14px; opacity: 0.08045977011494253;" id="8">popup</a> <a href="http://www.funcion13.com/tag/tipos/" class="tag-link-109" title="1 tema" style="font-size: 14px; opacity: 0.06896551724137931;" id="7">tipos</a> <a href="http://www.funcion13.com/tag/marcador/" class="tag-link-92" title="1 tema" style="font-size: 14px; opacity: 0.05747126436781609;" id="6">marcador</a> <a href="http://www.funcion13.com/tag/marker/" class="tag-link-91" title="1 tema" style="font-size: 14px; opacity: 0.04597701149425287;" id="5">marker</a> <a href="http://www.funcion13.com/tag/sql-2/" class="tag-link-87" title="1 tema" style="font-size: 14px; opacity: 0.034482758620689655;" id="4">sql</a> <a href="http://www.funcion13.com/tag/sql-join/" class="tag-link-88" title="1 tema" style="font-size: 14px; opacity: 0.022988505747126436;" id="3">sql join</a> <a href="http://www.funcion13.com/tag/inner-join/" class="tag-link-89" title="1 tema" style="font-size: 14px; opacity: 0.011494252873563218;" id="2">inner join</a> <a href="http://www.funcion13.com/tag/left-join/" class="tag-link-90" title="1 tema" style="font-size: 14px; opacity: 0;" id="1">left join</a>							</div>
							<style type="text/css">
								#opacity-tags-list a {color: #000000 !important;}
								#opacity-tags-list a:hover {opacity:1.0 !important;filter: alpha(opacity=100) !important;}
              </style>
						 </section></div>
	<div id="sidebar_bottom"></div>
</aside>		<div class="clearboth"></div>
	</div>
	<div id="page_bottom"></div>
</div>
<footer id="footer">
	<div id="footer_shadow"></div>
	<div class="inner">
			<div class="one_third">		<section id="recent_posts-2" class="widget widget_recent_posts">		<h3 class="widgettitle">Ultimos posts</h3>		<ul class="posts_list">
			<li>
				<a class="thumbnail" href="http://www.funcion13.com/2013/10/09/un-programador-en-londres/" title="Un programador en Londres">
					<img width="65" height="65" src="./Creando un pequeño ORM en PHP_files/piccadilly-circus-150x150.png" class="attachment-65x65 wp-post-image" alt="Un programador en Londres" title="Un programador en Londres">				</a>
				<div class="post_extra_info">
					<a href="http://www.funcion13.com/2013/10/09/un-programador-en-londres/" rel="bookmark" title="Un programador en Londres">
						Un programador en Londres					</a>
					<time datetime="2013-10-09">9 octubre, 2013</time>
				</div>
				<div class="clearboth"></div>
			</li>
			<li>
				<a class="thumbnail" href="http://www.funcion13.com/2013/08/06/code-bright-para-laravel-4-ya-disponible-en-castellano/" title="Code Bright para Laravel 4, ya disponible en castellano">
					<img width="65" height="15" src="./Creando un pequeño ORM en PHP_files/codebright-banner-300x71.png" class="attachment-65x65 wp-post-image" alt="Code Bright para Laravel 4, ya disponible en castellano" title="Code Bright para Laravel 4, ya disponible en castellano">				</a>
				<div class="post_extra_info">
					<a href="http://www.funcion13.com/2013/08/06/code-bright-para-laravel-4-ya-disponible-en-castellano/" rel="bookmark" title="Code Bright para Laravel 4, ya disponible en castellano">
						Code Bright para Laravel 4, ya disponible en castellano					</a>
					<time datetime="2013-08-06">6 agosto, 2013</time>
				</div>
				<div class="clearboth"></div>
			</li>
			<li>
				<div class="post_extra_info">
					<a href="http://www.funcion13.com/2013/06/26/no-te-pierdas-jquery-plugin-registry-jqueryio/" rel="bookmark" title="No te pierdas jQuery Plugin Registry #jqueryIO!">
						No te pierdas jQuery Plugin Registry #jqueryIO!					</a>
					<time datetime="2013-06-26">26 junio, 2013</time>
				</div>
				<div class="clearboth"></div>
			</li>
		</ul>
		</section></div>
			<div class="one_third"><section id="social-2" class="widget widget_social"><h3 class="widgettitle">En contacto</h3>		<div class="social_wrap social_animation_fade komodomedia_32">
			<a href="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/contacto@funcion13.com" rel="nofollow" target="_blank"><img width="32" height="32" src="./Creando un pequeño ORM en PHP_files/email_32.png" alt="Encuentranos en Email" title="Encuentranos en Email"></a><a href="http://www.facebook.com/pages/Funci%C3%B3n-13/341830245827906" rel="nofollow" target="_blank"><img width="32" height="32" src="./Creando un pequeño ORM en PHP_files/facebook_32.png" alt="Encuentranos en Facebook" title="Encuentranos en Facebook"></a><a href="http://feeds.feedburner.com/Funcion13" rel="nofollow" target="_blank"><img width="32" height="32" src="./Creando un pequeño ORM en PHP_files/rss_32.png" alt="Encuentranos en RSS" title="Encuentranos en RSS"></a><a href="http://twitter.com/funcion13" rel="nofollow" target="_blank"><img width="32" height="32" src="./Creando un pequeño ORM en PHP_files/twitter_32.png" alt="Encuentranos en Twitter" title="Encuentranos en Twitter"></a><a href="http://vimeo.com/user9869141" rel="nofollow" target="_blank"><img width="32" height="32" src="./Creando un pequeño ORM en PHP_files/vimeo_32.png" alt="Encuentranos en Vimeo" title="Encuentranos en Vimeo"></a>		</div>
		</section></div>
			<div class="one_third last"><section id="contact_form-2" class="widget widget_contact_form"><h3 class="widgettitle">Envíanos un correo</h3>		<p style="display:none;">Tu mensaje se envió con éxito. <strong>¡Gracias!</strong></p>
		<form class="contact_form" action="./Creando un pequeño ORM en PHP_files/Creando un pequeño ORM en PHP.htm" method="post" novalidate="novalidate">
			<p><input type="text" required="required" id="contact_name" name="contact_name" class="text_input" value="" size="22" tabindex="21">
			<label for="contact_name">Nombre *</label></p>
			
			<p><input type="email" required="required" id="contact_email" name="contact_email" class="text_input" value="" size="22" tabindex="22">
			<label for="contact_email">Email *</label></p>
			
			<p><textarea required="required" name="contact_content" class="textarea" cols="30" rows="5" tabindex="23"></textarea></p>
			
			<p><button type="submit" class="button white"><span>Enviar</span></button></p>
			<input type="hidden" value="contacto*funcion13.com" name="contact_to">
			<input type="hidden" value="1" name="theme_contact_form_submit">
		</form>
		</section></div>
		<div class="clearboth"></div>
	</div>
	<div id="footer_bottom">
		<div class="inner">
			<div id="copyright">Copyright © 2011 Funcion13.com.</div>
<nav id="footer_menu" class="menu-menu-pie-de-pagina-container"><ul id="menu-menu-pie-de-pagina" class="menu"><li id="menu-item-7" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7"><a href="http://www.funcion13.com/">Inicio</a></li>
<li id="menu-item-1558" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1558"><a href="http://www.funcion13.com/servicios/">Servicios</a></li>
<li id="menu-item-1685" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1685"><a href="http://www.funcion13.com/portafolio/">Portafolio</a></li>
<li id="menu-item-1556" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1556 current_page_parent"><a href="http://www.funcion13.com/">Blog</a></li>
<li id="menu-item-1640" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1640"><a href="http://www.funcion13.com/contacto/">Contacto</a></li>
</ul></nav>			<div class="clearboth"></div>
		</div>
	</div>
</footer>
    <script type="text/javascript">
    // <![CDATA[
        var disqus_shortname = 'funcion13';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('rel'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) url = url[0];
                    else url = url[1]
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + 'disqus.com/forums/' + disqus_shortname + '/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    //]]>
    </script>
<script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/shCore.js"></script>
<script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/shBrushSql.js"></script>
<script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/shBrushPhp.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.funcion13.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.funcion13.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeEclipse.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./Creando un pequeño ORM en PHP_files/7586d25c496b41581075dabb6a8efe9b.js"></script>
<script type="text/javascript">Cufon.now();if(typeof jQuery != 'undefined'){
if(jQuery.browser.msie && parseInt(jQuery.browser.version, 10)==8){
	jQuery(".jqueryslidemenu ul li ul").css({display:'block', visibility:'hidden'});
}
}
</script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27949982-1']);
  _gaq.push(['_trackPageview']);
  setTimeout("_gaq.push(['_trackEvent', '15_seconds', 'read'])",15000);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button type="button" id="cboxPrevious"></button><button type="button" id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div><a href="http://www.funcion13.com/2013/02/27/creando-un-pequeno-orm-en-php/#top" id="back-to-top" style="display: inline;">Back To Top</a><iframe name="oauth2relay1534859813" id="oauth2relay1534859813" src="./Creando un pequeño ORM en PHP_files/postmessageRelay.htm" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe></body></html>